<%- include('partials/header.ejs'); -%>

<div class="container">
  <div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
      <div class="col-10 col-sm-8 col-lg-6">
        <img
          src="/images/00SEPT-BOOKS-COMBO-videoSixteenByNineJumbo1600.jpg"
          class="d-block mx-lg-auto img-fluid"
          alt="Image of books"
          width="700"
          height="500"
          loading="lazy"
        />
      </div>
      <div class="col-lg-6">
        <h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3">
          Lawrence's Book Notes
        </h1>
        <p class="lead">
          Here are some of the notes and ratings from books that I have recently
          read.
        </p>
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
          <a href="/create-review" class="btn btn-primary btn-lg px-4 me-md-2">
            Create Review
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex gap-3 mb-3 justify-content-end">
    <a href="/?sort=recency" class="btn btn-light">Sort By Recency</a>
    <a href="/?sort=rating" class="btn btn-light">Sort By Rating</a>
  </div>

  <div class="row g-4">
    <% for(let book of books){ %>
    <div class="col-12 col-lg-6">
      <div class="card h-100">
        <div class="d-flex">
          <img
            src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-M.jpg"
            class="card-img-left img-fluid"
            alt="book cover"
          />
          <div class="card-body">
            <h5 class="card-title"><%= book.book_name %></h5>
            <p class="card-text"><%= book.book_review %></p>
            <p class="card-text">Rating: <%= book.rating %>/10</p>
            <p class="card-text"><%= book.formatted_date %></p>
            <div class="d-flex gap-1 justify-content-end">
              <a href="/edit-review/<%= book.id %>" class="btn btn-light"
                >Edit</a
              >
              <form
                action="/delete-review/<%= book.id %>"
                method="POST"
                onsubmit="return confirm('Are you sure you want to delete this review?')"
              >
                <button type="submit" class="btn btn-light">Delete</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </div>
</div>

<%- include('partials/footer.ejs'); -%>
